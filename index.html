<!DOCTYPE html>
<html>
<head>
<title>OreStellar</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">


<style>
html, body {
    background-color: black;
    color: white;
    margin: 0;
    padding: 0;
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
}

header {
    flex-shrink: 0; /* Prevent header from shrinking */
}

.container-wrapper {
    display: flex;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;
    justify-content: center; 
    align-items: center; 
}

.main-container {
    margin: 0 auto
    flex-shrink: 0; /* Prevent shrinking */
    width: 630px; /* Set the desired width */
    height: 418px; 
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    animation: expand 1.5s ease-out; /* Apply the animation on load */
}
@keyframes expand {
    from {
        transform: scale(0.5); /* Start small */
        opacity: 0.5;          /* Start with some transparency */
    }
    to {
        transform: scale(1);   /* Final size (normal) */
        opacity: 1;            /* Fully opaque */
    }
}

.w3-card, .w3-container {
    background-color: #333;
    color: white; /* Solid dark grey background */
    opacity: 1; /* Ensure full opacity */
    border-radius: 15px; /* Add rounded corners */
    
}

.full-width-textarea {
    width: 100%;
    box-sizing: border-box; /* Ensures padding is included in the width */
    margin-bottom: 20px; /* Add margin below textarea */
    resize: none; /* Prevent resizing */
    height: 100%; /* Fill the height of the container */
}

.hidden {
    display: none;
}

.total-cost-container {
    background-image: url('images/Contract 2.png'); /* Add your image */
    background-size: auto; /* Keep the actual size of the image */
    background-position: center;
    background-repeat: no-repeat;
    width: 630px; /* Updated width */
    height: 418px; /* Updated height */
    position: relative; /* Make it a positioned element */
    color: white;
    border-radius: 15px;
    margin-left: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    animation: expand 1.5s ease-out;
}

#totalCostText {
    position: absolute;
    top: 52%;  /* Move it down a bit */
    left: 53%; /* Move it to the right a bit */
    transform: translate(-50%, -50%);
    font-size: 16px;
    font-weight: bold;
    color: white;
    text-align: center;
}

#additionalText {
    position: absolute;
    top: 86%;  /* Adjust to position it vertically */
    left: 55%; /* Adjust to center horizontally */
    transform: translate(-50%, -50%);
    font-size: 16px; /* Adjust font size */
    font-weight: bold;
    color: white; /* Change the color if needed */
    text-align: center;
}

.quote-text {
    font-style: italic; /* Italicize the text */
    text-shadow: 
        0 2px 1px rgba(0, 0, 0, 0.3), /* Base shadow layer */
        0 6px 4px rgba(0, 0, 0, 0.5), /* Wider and more pronounced shadow layer */
        0 12px 8px rgba(0, 0, 0, 0.7);
}

#leftContainer {
    background-image: url('images/Contract 1.png'); /* Add your image */
    background-size: auto;
    background-position: center;
    background-repeat: no-repeat;
    width: 630px;
    height: 418px;
    position: relative;
    color: white;
    border-radius: 15px;
    margin-right: 20px; /* Add margin on the right */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    animation: expand 1.5s ease-out;
}

#unrecognizedItemsContainer {
    width: 550px; /* Match the width of the other containers */
    color: white;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    background-color: #000000; /* Background color to match the other containers */
    margin-bottom: 20px; /* Space between this container and the main container */
}

.info-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 28px; /* Larger icon */

        }

        @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

.info-button button {
    animation: bounce 2s infinite; /* Bounce animation */
    background-color: #ffffff; /* Bright color */
    color: rgb(0, 0, 0); /* Text color */
    border-radius: 50%; /* Circular button */
}

</style>
</head>
<body>

<header class="w3-container w3-theme w3-padding" id="myHeader">
  <div class="w3-center">
    <img src="images/OreStellar Header.png" alt="Header Image" style="width: 300px; height: auto;">
  </div>
  <hr>
</header>
  <!-- Floating Info Button -->
  <div class="info-button">
    <button onclick="document.getElementById('infoModal').style.display='block'" class="w3-button w3-theme">i</button>
</div>

<!-- Info Modal -->
<div id="infoModal" class="w3-modal">
    <div class="w3-modal-content">
        <header class="w3-container w3-theme">
            <span onclick="document.getElementById('infoModal').style.display='none'"
            class="w3-button w3-display-topright">&times;</span>
            <h2>Welcome to OreStellar's apparaisal calculator!</h2>
        </header>
        <div class="w3-container">
            <p>If you have any questions please feel free to message Morgan Auren in-game.

                At the moment the calculator only gives quotes for asteroid ores. 

                OreStellar only accepts contracts in High-Security space (0.5 or higher.) 
                
        We will decline any contract made in a high-sec island (areas cut off from trade hubs by low-security systems.)
            </p>
        </div>
    </div>
</div>


<div class="container-wrapper">
    <!-- Left container (hidden initially) -->
    <div id="leftContainer" class="total-cost-container hidden">
    </div>
  
  <div class="main-container w3-card w3-container w3-center">
    <h3 class="quote-text">Quote</h3><br>
    <div class="form-container">
      <form action="/submit" method="post" class="full-height">
        <textarea id="message" name="message" class="w3-input w3-border w3-round full-width-textarea" rows="8" cols="50" placeholder="Copy and paste your inventory here..&#10;&#10;Ytirium  82460&#10;Jet Ochre 1045&#10;Pellucid Crokite 320&#10;Compressed Ytirium 60253&#10;Compressed Ueganite 10403&#10;Compressed Ducinium 2402"></textarea>
      </form>
      <button onclick="showContent()" class="w3-button w3-black w3-round">Submit</button><br>
      <div id="unrecognizedItemsContainer" class="hidden w3-container w3-card w3-center" style="margin-bottom: 20px;">
        <p id="unrecognizedItemsText" style="color: red;"></p>
      </div>
    </div>
  </div>

  <div id="totalCostContainer" class="total-cost-container hidden">
    <p id="totalCostText">0</p>
    <p id="additionalText">that was stellar</p> 
  </div>
</div>

<script>
const priceList = {
"Arkonor": 5300,
"Crimson Arkonor": 5600,
"Prime Arkonor": 5800,
"Flawless Arkonor": 6000,
"Compressed Arkonor": 5300,
"Compressed Crimson Arkonor": 5600,
"Compressed Prime Arkonor": 6000,
"Compressed Flawless Arkonor": 5300,
"Bezdnacine": 14000,
"Abyssal Bezdnacine": 14200,
"Hadal Bezdnacine": 14800,
"Compressed Bezdnacine": 14000,
"Compressed Abyssal Bezdnacine": 14200,
"Compressed Hadal Bezdnacine": 14800,
"Bistot": 2600,
"Triclinic Bistot": 2700,
"Monoclinic Bistot": 2750,
"Cubic Bistot": 2850,
"Compressed Bistot": 2600,
"Compressed Triclinic Bistot": 2700,
"Compressed Monoclinic Bistot": 2750,
"Compressed Cubic Bistot": 2850,
"Crokite": 6000,
"Sharp Crokite": 6200,
"Crystalline Crokite": 6500,
"Pellucid Crokite": 6800,
"Compressed Crokite": 6000,
"Compressed Sharp Crokite": 6200,
"Compressed Crystalline Crokite": 6500,
"Compressed Pellucid Crokite": 6800,
"Dark Ochre": 4900,
"Onyx Ochre": 5000,
"Obsidian Ochre": 5100,
"Jet Ochre": 5200,
"Compressed Dark Ochre": 4900,
"Compressed Onyx Ochre": 5000,
"Compressed Obsidian Ochre": 5100,
"Compressed Jet Ochre": 5200,
"Ducinium": 5900,
"Noble Ducinium": 6000,
"Royal Ducinium": 6200,
"Imperial Ducinium": 6400,
"Compressed Ducinium": 5900,
"Compressed Noble Ducinium": 6000,
"Compressed Royal Ducinium": 6200,
"Compressed Imperial Ducinium": 6400,
"Eifyrium": 3000,
"Doped Eifyrium": 3100,
"Boosted Eifyrium": 3200,
"Augmented Eifyrium": 3300,
"Compressed Eifyrium": 3000,
"Compressed Doped Eifyrium": 3100,
"Compressed Boosted Eifyrium": 3200,
"Compressed Augmented Eifyrium": 3300,
"Gneiss": 3500,
"Iridescent Gneiss": 3700,
"Prismatic Gneiss": 3800,
"Brilliant Gneiss": 3900,
"Compressed Gneiss": 3500,
"Compressed Iridescent Gneiss": 3700,
"Compressed Prismatic Gneiss": 3800,
"Compressed Brilliant Gneiss": 3900,
"Griemeer": 150,
"Clear Griemeer": 152,
"Inky Griemeer": 155,
"Opaque Griemeer": 160,
"Compressed Griemeer": 150,
"Compressed Clear Griemeer": 152,
"Compressed Inky Griemeer": 155,
"Compressed Opaque Griemeer": 160,
"Hedbergite": 800,
"Vitric Hedbergite": 820,
"Glazed Hedbergite": 850,
"Lustrous Hedbergite": 870,
"Compressed Hedbergite": 800,
"Compressed Vitric Hedbergite": 820,
"Compressed Glazed Hedbergite": 850,
"Compressed Lustrous Hedbergite": 870,
"Hemorphite": 1000,
"Vivid Hemorphite": 1020,
"Radiant Hemorphite": 1050,
"Scintillating Hemorphite": 1100,
"Compressed Hemorphite": 1000,
"Compressed Vivid Hemorphite": 1020,
"Compressed Radiant Hemorphite": 1050,
"Compressed Scintillating Hemorphite": 1100,
"Hezorime": 950,
"Dull Hezorime": 1000,
"Serrated Hezorime": 1050,
"Sharp Hezorime": 1100,
"Compressed Hezorime": 950,
"Compressed Dull Hezorime": 1000,
"Compressed Serrated Hezorime": 1050,
"Compressed Sharp Hezorime": 1100,
"Jaspet": 400,
"Pure Jaspet": 410,
"Pristine Jaspet": 420,
"Immaculate Jaspet": 450,
"Compressed Jaspet": 400,
"Compressed Pure Jaspet": 410,
"Compressed Pristine Jaspet": 420,
"Compressed Immaculate Jaspet": 450,
"Kernite": 260,
"Luminous Kernite": 265,
"Fiery Kernite": 270,
"Resplendent Kernite": 290,
"Compressed Kernite": 260,
"Compressed Luminous Kernite": 265,
"Compressed Fiery Kernite": 270,
"Compressed Resplendent Kernite": 290,
"Kylixium": 350,
"Kaolin Kylixium": 360,
"Argil Kylixium": 370,
"Adobe Kylixium": 390,
"Compressed Kylixium": 350,
"Compressed Kaolin Kylixium": 360,
"Compressed Argil Kylixium": 370,
"Compressed Adobe Kylixium": 390,
"Mercoxit": 55000,
"Magma Mercoxit": 56000,
"Vitreous Mercoxit": 57000,
"Compressed Mercoxit": 55000,
"Compressed Magma Mercoxit": 56000,
"Compressed Vitreous Mercoxit": 57000,
"Mordunium": 2.5,
"Plum Mordunium": 2.7,
"Prize Mordunium": 2.9,
"Plunder Mordunium": 3,
"Compressed Mordunium": 2.5,
"Compressed Plum Mordunium": 2.7,
"Compressed Prize Mordunium": 2.9,
"Compressed Plunder Mordunium": 3,
"Nocxite": 700,
"Fragrant Nocxite": 710,
"Intoxicating Nocxite": 720,
"Ambrosial Nocxite": 730,
"Compressed Nocxite": 700,
"Compressed Fragrant Nocxite": 710,
"Compressed Intoxicating Nocxite": 720,
"Compressed Ambrosial Nocxite": 730,
"Omber": 150,
"Silvery Omber": 155,
"Golden Omber": 160,
"Platinoid Omber": 170,
"Compressed Omber": 150,
"Compressed Silvery Omber": 155,
"Compressed Golden Omber": 160,
"Compressed Platinoid Omber": 170,
"Plagioclase": 35,
"Azure Plagioclase": 37,
"Rich Plagioclase": 39,
"Sparkling Plagioclase": 40,
"Compressed Plagioclase": 35,
"Compressed Azure Plagioclase": 37,
"Compressed Rich Plagioclase": 39,
"Compressed Sparkling Plagioclase": 40,
"Pyroxeres": 16,
"Solid Pyroxeres": 17,
"Viscous Pyroxeres": 18,
"Opulent Pyroxeres": 19,
"Compressed Pyroxeres": 16,
"Compressed Solid Pyroxeres": 17,
"Compressed Viscous Pyroxeres": 18,
"Compressed Opulent Pyroxeres": 19,
"Rakovene": 9100,
"Abyssal Rakovene": 9300,
"Hadal Rakovene": 9500,
"Compressed Rakovene": 9100,
"Compressed Abyssal Rakovene": 9300,
"Compressed Hadal Rakovene": 9500,
"Scordite": 7.5,
"Condensed Scordite": 7.9,
"Massive Scordite": 8.1,
"Glossy Scordite": 8.2,
"Compressed Scordite": 7.5,
"Compressed Condensed Scordite": 7.9,
"Compressed Massive Scordite": 8.1,
"Compressed Glossy Scordite": 8.2,
"Spodumain": 6500,
"Bright Spodumain": 6600,
"Gleaming Spodumain": 6700,
"Dazzling Spodumain": 6800,
"Compressed Spodumain": 6500,
"Compressed Bright Spodumain": 6600,
"Compressed Gleaming Spodumain": 6700,
"Compressed Dazzling Spodumain": 6800,
"Talassonite": 8000,
"Abyssal Talassonite": 8500,
"Hadal Talassonite": 8700,
"Compressed Talassonite": 8000,
"Compressed Abyssal Talassonite": 8500,
"Compressed Hadal Talassonite": 8700,
"Ueganite": 1430,
"Foggy Ueganite": 1480,
"Overcast Ueganite": 1500,
"Stormy Ueganite": 1520,
"Compressed Ueganite": 1430,
"Compressed Foggy Ueganite": 1480,
"Compressed Overcast Ueganite": 1500,
"Compressed Stormy Ueganite": 1520,
"Veldspar": 9,
"Concentrated Veldspar": 9.2,
"Dense Veldspar": 9.4,
"Stable Veldspar": 9.5,
"Compressed Veldspar": 9,
"Compressed Concentrated Veldspar": 9.2,
"Compressed Dense Veldspar": 9.4,
"Compressed Stable Veldspar": 9.5,
"Ytirium": 450,
"Bootleg Ytirium": 455,
"Firewater Ytirium": 475,
"Moonshine Ytirium": 500,
"Compressed Ytirium": 450,
"Compressed Bootleg Ytirium": 455,
"Compressed Firewater Ytirium": 475,
"Compressed Moonshine Ytirium": 500,
};

// Function to add commas to a number
function formatNumberWithCommas(number) {
    return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function showContent() {
  var totalCostContainer = document.getElementById('totalCostContainer');
    var leftContainer = document.getElementById('leftContainer');
    var textarea = document.getElementById('message').value;

    // Reset content before updating
    document.getElementById('totalCostText').innerHTML = '';  

    // Define regex pattern
    var regex = /([\w\s]+?)\s+(\d+)/g;
    var matches;
    var totalCost = 0;
    var invalidItems = [];

    // Iterate through all matches
    while ((matches = regex.exec(textarea)) !== null) {
        var item = matches[1].trim();
        var quantity = parseInt(matches[2]);

        if (priceList[item] !== undefined) {
            var price = priceList[item];
            var cost = quantity * price;
            totalCost += cost;
        } else {
            invalidItems.push(item); // Collect invalid items
        }
    }

    var resultText = formatNumberWithCommas(totalCost.toFixed(2));
    
    // Show invalid items, if any

    if (invalidItems.length > 0) {
        var unrecognizedItems = 'Unrecognized items: ' + invalidItems.join(', ');
        document.getElementById('unrecognizedItemsText').innerHTML = unrecognizedItems;
        unrecognizedItemsContainer.classList.remove('hidden'); // Show unrecognized items container
    }

    // Display total cost and invalid items
    document.getElementById('totalCostText').innerHTML = resultText;
    // Show both containers
    totalCostContainer.classList.remove('hidden');
    leftContainer.classList.remove('hidden');
}
</script>
<script src="https://www.w3schools.com/lib/w3.js"></script>
</body>
</html>
