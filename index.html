<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OreStellar</title>
<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
  font-family: Orbitron, monospace;
  color: white;
}

/* === STAR BACKGROUND === */
.stars {
  position: fixed;
  width: 100%;
  height: 100%;
  background: radial-gradient(white, rgba(255,255,255,0) 70%) center center / 2px 2px repeat;
  animation: moveStars 120s linear infinite;
  z-index: -1;
  opacity: 0.4;
}
@keyframes moveStars {
  from { background-position: 0 0, 0 0; }
  to { background-position: -10000px 5000px, 10000px -5000px; }
}

/* === HEADER === */
#myHeader {
  text-align: center;
  padding: 40px 0;
  cursor: pointer;
}
#logoText {
  font-size: 5rem;
  font-weight: 700;
  text-shadow: 0 0 15px #00ffff;
  color: rgba(255,255,255,0.9);
  transition: text-shadow 0.5s ease;
}
#logoText:hover {
  text-shadow: 0 0 30px #00ffff;
}

/* === MAIN CONTAINER === */
.main-container {
  text-align: center;
  margin-top: 30px;
}
textarea {
  width: 80%;
  height: 100px;
  background: rgba(0,0,0,0.6);
  border: 1px solid #00ffff;
  color: white;
  font-family: monospace;
  font-size: 14px;
  padding: 10px;
}
button {
  margin-top: 15px;
  background: none;
  border: 1px solid #00ffff;
  color: white;
  padding: 8px 18px;
  font-family: Orbitron, monospace;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: #00ffff;
  color: black;
}

/* === SUMMARY + CONTRACTS === */
#summaryContainer {
  display: none;
  justify-content: center;
  margin-top: 20px;
}
.summary-box {
  border: 1px solid #00ffff;
  padding: 10px;
  width: 300px;
  background: rgba(0,0,0,0.6);
  overflow-y: auto;
  max-height: 250px;
}
#summaryList {
  list-style: none;
  padding: 0;
  margin: 0;
}
#summaryList li {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  margin-bottom: 5px;
}
#summaryTotal {
  text-align: center;
  margin-top: 10px;
  color: #00ff00;
  font-size: 16px;
}

/* === TOTAL ISK DISPLAY === */
#totalCostContainer {
  display: none;
  position: absolute;
  top: 65%;
  left: 52%;
  transform: translate(-50%, -50%);
  font-size: 22px;
  color: #00ff00;
  text-shadow: 0 0 8px #00ff00;
}

/* === COPIED MESSAGE === */
#copiedMessage {
  display: none;
  position: absolute;
  top: 65%;
  left: 52%;
  transform: translate(-50%, -50%);
  color: #00ffff;
  font-size: 22px;
  text-shadow: 0 0 8px #00ffff;
  animation: fadeInOut 3s ease;
}
@keyframes fadeInOut {
  0% { opacity: 0; }
  20% { opacity: 1; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}
</style>
</head>
<body>
<div class="stars"></div>

<header id="myHeader">
  <div id="logoText">ORESTELLAR</div>
</header>

<div class="main-container">
  <textarea id="message" placeholder="Paste your inventory here..."></textarea><br>
  <button onclick="showContent()">Submit</button>
</div>

<div id="summaryContainer">
  <div class="summary-box">
    <ul id="summaryList"></ul>
    <div id="summaryTotal">Total: 0 ISK</div>
  </div>
</div>

<div id="leftContainer" style="display:none;">
  <!-- Contracts area placeholder -->
</div>

<div id="totalCostContainer"><span id="totalCostText">0 ISK</span></div>
<div id="copiedMessage">Copied!</div>

<script>
// === DUMMY PRICES ===
const priceList = {
  'ytirium': 1200,
  'arkonor': 220,
  'bistot': 350
};
function formatNumber(num){return num.toLocaleString('en-US',{maximumFractionDigits:0});}

// === SUBMIT ===
function showContent(){
  const t = document.getElementById('message').value;
  const regex = /([\w\s]+?)\s+(\d+)/g;
  let match, total = 0, summary = [];
  while((match = regex.exec(t)) !== null){
    const name = match[1].trim(), qty = parseInt(match[2]);
    if(priceList[name.toLowerCase()]) {
      summary.push({name, qty, val: qty*priceList[name.toLowerCase()]});
      total += qty*priceList[name.toLowerCase()];
    } else {
      summary.push({name, qty, val: 0, unknown:true});
    }
  }

  const list = document.getElementById('summaryList');
  list.innerHTML = '';
  summary.forEach(i=>{
    const li = document.createElement('li');
    li.innerHTML = `<span style="color:${i.unknown?'#ff5555':'#fff'}">${i.name}</span><span style="color:${i.unknown?'#ff5555':'#00ff00'}">${i.unknown?'?':formatNumber(i.val)} ISK</span>`;
    list.appendChild(li);
  });

  const summaryContainer = document.getElementById('summaryContainer');
  summaryContainer.style.display='flex';

  document.getElementById('summaryTotal').innerText = `Total: ${formatNumber(total)} ISK`;

  // Show contracts
  document.getElementById('leftContainer').style.display='block';
  const totalCost = document.getElementById('totalCostContainer');
  totalCost.style.display='block';
  document.getElementById('totalCostText').innerText = formatNumber(total) + " ISK";

  // Hide inventory box after submit
  document.querySelector('.main-container').style.display='none';
}

// === LOGO SHATTER ANIMATION ===
function shatterLogo(callback) {
  const logo = document.getElementById('logoText');
  const rect = logo.getBoundingClientRect();
  const pieceSize = 8; // smaller pieces = more shards
  const pieces = [];
  logo.style.visibility = 'hidden';

  for (let y = 0; y < rect.height; y += pieceSize) {
    for (let x = 0; x < rect.width; x += pieceSize) {
      const piece = document.createElement('div');
      piece.textContent = logo.textContent;
      piece.style.position = 'fixed';
      piece.style.left = rect.left + x + 'px';
      piece.style.top = rect.top + y + 'px';
      piece.style.width = pieceSize + 'px';
      piece.style.height = pieceSize + 'px';
      piece.style.overflow = 'hidden';
      piece.style.fontFamily = 'Orbitron, monospace';
      piece.style.fontWeight = '700';
      piece.style.color = '#fff';
      piece.style.fontSize = '5rem';
      piece.style.clip = `rect(${y}px,${x+pieceSize}px,${y+pieceSize}px,${x}px)`;
      piece.style.pointerEvents = 'none';
      piece.style.transformOrigin = 'center';
      piece.style.backfaceVisibility = 'hidden';
      document.body.appendChild(piece);
      pieces.push({el: piece, 
        vx: (Math.random()-0.5)*7, 
        vy: -Math.random()*8-2, 
        vz: (Math.random()-0.5)*10,
        rotationX: 0, rotationY: 0,
        vrx: (Math.random()-0.5)*0.3,
        vry: (Math.random()-0.5)*0.3
      });
    }
  }

  let time = 0;
  function animate() {
    time += 0.016;
    pieces.forEach(p => {
      p.vy += 0.15;
      const left = parseFloat(p.el.style.left) + p.vx;
      const top = parseFloat(p.el.style.top) + p.vy;
      p.rotationX += p.vrx * 60;
      p.rotationY += p.vry * 60;
      p.el.style.left = left + 'px';
      p.el.style.top = top + 'px';
      p.el.style.transform = `rotateX(${p.rotationX}deg) rotateY(${p.rotationY}deg)`;
      p.el.style.opacity = 1 - time/2.5;
    });
    if (time < 2.5) requestAnimationFrame(animate);
    else {
      pieces.forEach(p => p.el.remove());
      if (callback) callback();
    }
  }

  setTimeout(() => requestAnimationFrame(animate), 500);
}

// === CLICK EVENT ===
document.getElementById('myHeader').addEventListener('click', () => {
  shatterLogo(() => location.reload());
});
</script>
</body>
</html>
