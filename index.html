<!DOCTYPE html>
<html>
<head>
<title>OreStellar</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">

<style>
html, body {
    background-color: black;
    color: white;
    margin: 0;
    padding: 0;
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
}

header {
    flex-shrink: 0; /* Prevent header from shrinking */
}

.container-wrapper {
    display: flex;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;
}

.main-container {
    flex: 1; /* Main container takes available space */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.w3-card, .w3-container {
    background-color: #333;
    color: white; /* Solid dark grey background */
    opacity: 1; /* Ensure full opacity */
    border-radius: 15px; /* Add rounded corners */
}

.full-width-textarea {
    width: 100%;
    box-sizing: border-box; /* Ensures padding is included in the width */
    margin-bottom: 20px; /* Add margin below textarea */
    resize: none; /* Prevent resizing */
    height: 100%; /* Fill the height of the container */
}

.hidden {
    display: none;
}

.total-cost-container {
    background-image: url('images/Contract 2.png'); /* Add your image */
    background-size: auto; /* Keep the actual size of the image */
    background-position: center;
    background-repeat: no-repeat;
    width: 630px; /* Updated width */
    height: 418px; /* Updated height */
    position: relative; /* Make it a positioned element */
    color: white;
    border-radius: 15px;
    margin-left: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

#totalCostText {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    font-weight: bold;
    color: white;
    text-align: center;
}
</style>
</head>
<body>

<header class="w3-container w3-theme w3-padding" id="myHeader">
  <div class="w3-center">
    <img src="images/OreStellar Header.png" alt="Header Image" style="width: 300px; height: auto;">
  </div>
  <hr>
</header>

<div class="container-wrapper">
  <div class="main-container w3-card w3-container w3-center">
    <h3>Quote</h3><br>
    <div class="form-container">
      <form action="/submit" method="post" class="full-height">
        <textarea id="message" name="message" class="w3-input w3-border w3-round full-width-textarea" rows="8" cols="50" placeholder="Copy and paste your inventory here..&#10;&#10;Ytirium  82460&#10;Jet Ochre 1045&#10;Compressed Ytirium 60253&#10;Compressed Ducinium 2402"></textarea>
      </form>
      <button onclick="showContent()" class="w3-button w3-black w3-round">Submit</button>
    </div>
  </div>

  <div id="totalCostContainer" class="total-cost-container hidden">
    <p id="totalCostText">0 isk</p>
  </div>
</div>

<script>
const priceList = {
"Arkonor": 10,
"Crimson Arkonor": 10,
"Prime Arkonor": 10,
"Flawless Arkonor": 10,
"Compressed Arkonor": 10,
"Compressed Crimson Arkonor": 10,
"Compressed Prime Arkonor": 10,
"Compressed Flawless Arkonor": 10,
"Bezdnacine": 10,
"Abyssal Bezdnacine": 10,
"Hadal Bezdnacine": 10,
"Compressed Bezdnacine": 10,
"Compressed Abyssal Bezdnacine": 10,
"Compressed Hadal Bezdnacine": 10,
"Bistot": 10,
"Triclinic Bistot": 10,
"Monoclinic Bistot": 10,
"Cubic Bistot": 10,
"Compressed Bistot": 10,
"Compressed Triclinic Bistot": 10,
"Compressed Monoclinic Bistot": 10,
"Compressed Cubic Bistot": 10,
"Crokite": 10,
"Sharp Crokite": 10,
"Crystalline Crokite": 10,
"Pellucid Crokite": 10,
"Compressed Crokite": 10,
"Compressed Sharp Crokite": 10,
"Compressed Crystalline Crokite": 10,
"Compressed Pellucid Crokite": 10,
"Dark Ochre": 10,
"Onyx Ochre": 10,
"Obsidian Ochre": 10,
"Jet Ochre": 10,
"Compressed Dark Ochre": 10,
"Compressed Onyx Ochre": 10,
"Compressed Obsidian Ochre": 10,
"Compressed Jet Ochre": 10,
"Ducinium": 10,
"Noble Ducinium": 10,
"Royal Ducinium": 10,
"Imperial Ducinium": 10,
"Compressed Ducinium": 10,
"Compressed Noble Ducinium": 10,
"Compressed Royal Ducinium": 10,
"Compressed Imperial Ducinium": 10,
"Eifyrium": 10,
"Doped Eifyrium": 10,
"Boosted Eifyrium": 10,
"Augmented Eifyrium": 10,
"Compressed Eifyrium": 10,
"Compressed Doped Eifyrium": 10,
"Compressed Boosted Eifyrium": 10,
"Compressed Augmented Eifyrium": 10,
"Gneiss": 10,
"Iridescent Gneiss": 10,
"Prismatic Gneiss": 10,
"Brilliant Gneiss": 10,
"Compressed Gneiss": 10,
"Compressed Iridescent Gneiss": 10,
"Compressed Prismatic Gneiss": 10,
"Compressed Brilliant Gneiss": 10,
"Griemeer": 10,
"Clear Griemeer": 10,
"Inky Griemeer": 10,
"Opaque Griemeer": 10,
"Compressed Griemeer": 10,
"Compressed Clear Griemeer": 10,
"Compressed Inky Griemeer": 10,
"Compressed Opaque Griemeer": 10,
"Hedbergite": 10,
"Vitric Hedbergite": 10,
"Glazed Hedbergite": 10,
"Lustrous Hedbergite": 10,
"Compressed Hedbergite": 10,
"Compressed Vitric Hedbergite": 10,
"Compressed Glazed Hedbergite": 10,
"Compressed Lustrous Hedbergite": 10,
"Hemorphite": 10,
"Vivid Hemorphite": 10,
"Radiant Hemorphite": 10,
"Scintillating Hemorphite": 10,
"Compressed Hemorphite": 10,
"Compressed Vivid Hemorphite": 10,
"Compressed Radiant Hemorphite": 10,
"Compressed Scintillating Hemorphite": 10,
"Hezorime": 10,
"Dull Hezorime": 10,
"Serrated Hezorime": 10,
"Sharp Hezorime": 10,
"Compressed Hezorime": 10,
"Compressed Dull Hezorime": 10,
"Compressed Serrated Hezorime": 10,
"Compressed Sharp Hezorime": 10,
"Jaspet": 10,
"Pure Jaspet": 10,
"Pristine Jaspet": 10,
"Immaculate Jaspet": 10,
"Compressed Jaspet": 10,
"Compressed Pure Jaspet": 10,
"Compressed Pristine Jaspet": 10,
"Compressed Immaculate Jaspet": 10,
"Kernite": 10,
"Luminous Kernite": 10,
"Fiery Kernite": 10,
"Resplendent Kernite": 10,
"Compressed Kernite": 10,
"Compressed Luminous Kernite": 10,
"Compressed Fiery Kernite": 10,
"Compressed Resplendent Kernite": 10,
"Kylixium": 10,
"Kaolin Kylixium": 10,
"Argil Kylixium": 10,
"Adobe Kylixium": 10,
"Compressed Kylixium": 10,
"Compressed Kaolin Kylixium": 10,
"Compressed Argil Kylixium": 10,
"Compressed Adobe Kylixium": 10,
"Mercoxit": 10,
"Magma Mercoxit": 10,
"Vitreous Mercoxit": 10,
"Compressed Mercoxit": 10,
"Compressed Magma Mercoxit": 10,
"Compressed Vitreous Mercoxit": 10,
"Mordunium": 10,
"Plum Mordunium": 10,
"Prize Mordunium": 10,
"Plunder Mordunium": 10,
"Compressed Mordunium": 10,
"Compressed Plum Mordunium": 10,
"Compressed Prize Mordunium": 10,
"Compressed Plunder Mordunium": 10,
"Nocxite": 10,
"Fragrant Nocxite": 10,
"Intoxicating Nocxite": 10,
"Ambrosial Nocxite": 10,
"Compressed Nocxite": 10,
"Compressed Fragrant Nocxite": 10,
"Compressed Intoxicating Nocxite": 10,
"Compressed Ambrosial Nocxite": 10,
"Omber": 10,
"Silvery Omber": 10,
"Golden Omber": 10,
"Platinoid Omber": 10,
"Compressed Omber": 10,
"Compressed Silvery Omber": 10,
"Compressed Golden Omber": 10,
"Compressed Platinoid Omber": 10,
"Plagioclase": 10,
"Azure Plagioclase": 10,
"Rich Plagioclase": 10,
"Sparkling Plagioclase": 10,
"Compressed Plagioclase": 10,
"Compressed Azure Plagioclase": 10,
"Compressed Rich Plagioclase": 10,
"Compressed Sparkling Plagioclase": 10,
"Pyroxeres": 10,
"Solid Pyroxeres": 10,
"Viscous Pyroxeres": 10,
"Opulent Pyroxeres": 10,
"Compressed Pyroxeres": 10,
"Compressed Solid Pyroxeres": 10,
"Compressed Viscous Pyroxeres": 10,
"Compressed Opulent Pyroxeres": 10,
"Rakovene": 10,
"Abyssal Rakovene": 10,
"Hadal Rakovene": 10,
"Compressed Rakovene": 10,
"Compressed Abyssal Rakovene": 10,
"Compressed Hadal Rakovene": 10,
"Scordite": 10,
"Condensed Scordite": 10,
"Massive Scordite": 10,
"Glossy Scordite": 10,
"Compressed Scordite": 10,
"Compressed Condensed Scordite": 10,
"Compressed Massive Scordite": 10,
"Compressed Glossy Scordite": 10,
"Spodumain": 10,
"Bright Spodumain": 10,
"Gleaming Spodumain": 10,
"Dazzling Spodumain": 10,
"Compressed Spodumain": 10,
"Compressed Bright Spodumain": 10,
"Compressed Gleaming Spodumain": 10,
"Compressed Dazzling Spodumain": 10,
"Talassonite": 10,
"Abyssal Talassonite": 10,
"Hadal Talassonite": 10,
"Compressed Talassonite": 10,
"Compressed Abyssal Talassonite": 10,
"Compressed Hadal Talassonite": 10,
"Ueganite": 10,
"Foggy Ueganite": 10,
"Overcast Ueganite": 10,
"Stormy Ueganite": 10,
"Compressed Ueganite": 10,
"Compressed Foggy Ueganite": 10,
"Compressed Overcast Ueganite": 10,
"Compressed Stormy Ueganite": 10,
"Veldspar": 10,
"Concentrated Veldspar": 10,
"Dense Veldspar": 10,
"Stable Veldspar": 10,
"Compressed Veldspar": 10,
"Compressed Concentrated Veldspar": 10,
"Compressed Dense Veldspar": 10,
"Compressed Stable Veldspar": 10,
"Ytirium": 10,
"Bootleg Ytirium": 10,
"Firewater Ytirium": 10,
"Moonshine Ytirium": 10,
"Compressed Ytirium": 10,
"Compressed Bootleg Ytirium": 10,
"Compressed Firewater Ytirium": 10,
"Compressed Moonshine Ytirium": 10,
};

// Function to add commas to a number
function formatNumberWithCommas(number) {
    return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function showContent() {
    var totalCostContainer = document.getElementById('totalCostContainer');
    var textarea = document.getElementById('message').value;

    // Reset content before updating
    document.getElementById('totalCostText').innerHTML = '';  

    // Define regex pattern
    var regex = /([\w\s]+?)\s+(\d+)/g;
    var matches;
    var totalCost = 0;
    var invalidItems = [];

    // Iterate through all matches
    while ((matches = regex.exec(textarea)) !== null) {
        var item = matches[1].trim();
        var quantity = parseInt(matches[2]);

        if (priceList[item] !== undefined) {
            var price = priceList[item];
            var cost = quantity * price;
            totalCost += cost;
        } else {
            invalidItems.push(item); // Collect invalid items
        }
    }

    var resultText = formatNumberWithCommas(totalCost.toFixed(2)) + ' isk';
    
    // Show invalid items, if any
    if (invalidItems.length > 0) {
        resultText += '<br><br><span style="color: red;">Unrecognized items: ' + invalidItems.join(', ') + '</span>';
    }

    // Display total cost and invalid items
    document.getElementById('totalCostText').innerHTML = resultText;
    totalCostContainer.classList.remove('hidden');
}
</script>

</body>
</html>
