<!DOCTYPE html>
<html>
<head>
<title>OreStellar</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">


<style>
html, body {
    background-color: black;
    color: white;
    margin: 0;
    padding: 0;
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
}

header {
    flex-shrink: 0; /* Prevent header from shrinking */
}

.container-wrapper {
    display: flex;
    height: 100%;
    padding: 20px;
    box-sizing: border-box;
    justify-content: center; 
    align-items: center; 
}

.main-container {
    margin: 0 auto
    flex-shrink: 0; /* Prevent shrinking */
    width: 630px; /* Set the desired width */
    height: 418px; 
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    animation: expand 1.5s ease-out; /* Apply the animation on load */
}
@keyframes expand {
    from {
        transform: scale(0.5); /* Start small */
        opacity: 0.5;          /* Start with some transparency */
    }
    to {
        transform: scale(1);   /* Final size (normal) */
        opacity: 1;            /* Fully opaque */
    }
}

.w3-card, .w3-container {
    background-color: #333;
    color: white; /* Solid dark grey background */
    opacity: 1; /* Ensure full opacity */
    border-radius: 15px; /* Add rounded corners */
    
}

.full-width-textarea {
    width: 100%;
    box-sizing: border-box; /* Ensures padding is included in the width */
    margin-bottom: 20px; /* Add margin below textarea */
    resize: none; /* Prevent resizing */
    height: 100%; /* Fill the height of the container */
}

.hidden {
    display: none;
}

.total-cost-container {
    background-image: url('images/Contract 2.png'); /* Add your image */
    background-size: contain; /* Keep the actual size of the image */
    background-position: center;
    background-repeat: no-repeat;
    width: 630px; /* Updated width */
    height: 418px; /* Updated height */
    position: relative; /* Make it a positioned element */
    color: white;
    border-radius: 15px;
    margin-left: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    animation: expand 1.5s ease-out;
}

#totalCostText {
    position: absolute;
    top: 52%;  /* Move it down a bit */
    left: 53%; /* Move it to the right a bit */
    transform: translate(-50%, -50%);
    font-size: 16px;
    font-weight: bold;
    color: white;
    text-align: center;
}


.quote-text {
    font-style: italic; /* Italicize the text */
    text-shadow: 
        0 2px 1px rgba(0, 0, 0, 0.3), /* Base shadow layer */
        0 6px 4px rgba(0, 0, 0, 0.5), /* Wider and more pronounced shadow layer */
        0 12px 8px rgba(0, 0, 0, 0.7);
}

#leftContainer {
    background-image: url('images/Contract 1.png'); /* Add your image */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    width: 630px;
    height: 418px;
    position: relative;
    color: white;
    border-radius: 15px;
    margin-right: 20px; /* Add margin on the right */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    animation: expand 1.5s ease-out;
}

#unrecognizedItemsContainer {
    width: 550px; /* Match the width of the other containers */
    color: white;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    background-color: #000000; /* Background color to match the other containers */
    margin-bottom: 20px; /* Space between this container and the main container */
}

.info-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 28px; /* Larger icon */
             z-index: 1000;

        }

        @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

.info-button button {
    animation: bounce 2s infinite; /* Bounce animation */
    background-color: #ffffff; /* Bright color */
    color: rgb(0, 0, 0); /* Text color */
    border-radius: 50%; /* Circular button */
}

.w3-modal-overlay {
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background: transparent; /* No background color */
    z-index: 999; /* Ensure it's above other content */
}

.w3-modal-content {
    position: relative;
    z-index: 1000; /* Higher z-index to stay on top of the overlay */
    background-color: #000000;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Could be more or less, depending on screen size */
    max-width: 600px; /* Limit the maximum width */
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0 4px 8px rgba(0,0,0,0.5); /* Box shadow for 3D effect */
    animation: slideIn 0.5s ease; /* Slide in animation */
}

.w3-modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 999; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0,0,0,0.5); /* Black background with opacity */
    animation: fadeIn 0.5s ease; /* Fade in animation */
}

/* Fade in animation */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Slide in animation */
@keyframes slideIn {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    text-align: center; /* Center the text */
}
</style>
</head>
<body>

<header class="w3-container w3-theme w3-padding" id="myHeader">
  <div class="w3-center">
    <a href="https://orestellar.github.io/" target="_blank"></a>
    <img src="images/OreStellar Header.png" alt="Header Image" style="width: 300px; height: auto;">
  </div>
  <hr>
</header>
  <!-- Floating Info Button -->
  <div class="info-button">
    <button onclick="document.getElementById('infoModal').style.display='block'" class="w3-button w3-theme">i</button>
</div>

<!-- Info Modal -->
<div id="infoModal" class="w3-modal">
    <div class="w3-modal-content">
        <span onclick="closeModal()"
        class="w3-button w3-display-topright">&times;</span>
        <header class="w3-container w3-theme modal-header">
            <h2>Welcome to OreStellar's appraisal calculator!</h2>
        </header>
        <div class="w3-container">
            <p>If you have any questions, please feel free to message Morgan Auren in-game.

                At the moment, the calculator only gives quotes for asteroid ores. 

                OreStellar only accepts contracts in High-Security space (0.5 or higher.) 
                
                We will decline any contract made in a high-sec island (areas cut off from trade hubs by low-security systems.)
            </p>
        </div>
    </div>
</div>





<div class="container-wrapper">
    <!-- Left container (hidden initially) -->
    <div id="leftContainer" class="total-cost-container hidden">
    </div>
  
  <div class="main-container w3-card w3-container w3-center">
    <h3 class="quote-text">Quote</h3><br>
    <div class="form-container">
      <form action="/submit" method="post" class="full-height">
        <textarea id="message" name="message" class="w3-input w3-border w3-round full-width-textarea" rows="8" cols="50" placeholder="Copy and paste your inventory here..&#10;&#10;Ytirium  82460&#10;Jet Ochre 1045&#10;Pellucid Crokite 320&#10;Compressed Ytirium 60253&#10;Compressed Ueganite 10403&#10;Compressed Ducinium 2402"></textarea>
      </form>
      <button onclick="showContent()" class="w3-button w3-black w3-round">Submit</button><br>
      <div id="unrecognizedItemsContainer" class="hidden w3-container w3-card w3-center" style="margin-bottom: 20px;">
        <p id="unrecognizedItemsText" style="color: red;"></p>
      </div>
    </div>
  </div>

  <div id="totalCostContainer" class="total-cost-container hidden">
    <p id="totalCostText">0</p>
  </div>
</div>

<script>
const priceList = {
"Arkonor": 3900,
"Crimson Arkonor": 4000,
"Prime Arkonor": 4100,
"Flawless Arkonor": 4200,
"Compressed Arkonor": 3900,
"Compressed Crimson Arkonor": 4000,
"Compressed Prime Arkonor": 4100,
"Compressed Flawless Arkonor": 4200,
"Bezdnacine": 14000,
"Abyssal Bezdnacine": 14200,
"Hadal Bezdnacine": 14800,
"Compressed Bezdnacine": 14000,
"Compressed Abyssal Bezdnacine": 14200,
"Compressed Hadal Bezdnacine": 14800,
"Bistot": 3300,
"Triclinic Bistot": 3400,
"Monoclinic Bistot": 3500,
"Cubic Bistot": 3600,
"Compressed Bistot": 3300,
"Compressed Triclinic Bistot": 3400,
"Compressed Monoclinic Bistot": 3500,
"Compressed Cubic Bistot": 3300,
"Crokite": 7400,
"Sharp Crokite": 7500,
"Crystalline Crokite": 7600,
"Pellucid Crokite": 7900,
"Compressed Crokite": 7500,
"Compressed Sharp Crokite": 7600,
"Compressed Crystalline Crokite": 7700,
"Compressed Pellucid Crokite": 8000,
"Dark Ochre": 5500,
"Onyx Ochre": 5600,
"Obsidian Ochre": 5700,
"Jet Ochre": 5800,
"Compressed Dark Ochre": 5500,
"Compressed Onyx Ochre": 5600,
"Compressed Obsidian Ochre": 5700,
"Compressed Jet Ochre": 5800,
"Ducinium": 3500,
"Noble Ducinium": 3700,
"Royal Ducinium": 3900,
"Imperial Ducinium": 4000,
"Compressed Ducinium": 3500,
"Compressed Noble Ducinium": 3700,
"Compressed Royal Ducinium": 3900,
"Compressed Imperial Ducinium": 4000,
"Eifyrium": 3500,
"Doped Eifyrium": 3600,
"Boosted Eifyrium": 3700,
"Augmented Eifyrium": 3800,
"Compressed Eifyrium": 3500,
"Compressed Doped Eifyrium": 3700,
"Compressed Boosted Eifyrium": 3800,
"Compressed Augmented Eifyrium": 3800,
"Gneiss": 3200,
"Iridescent Gneiss": 3300,
"Prismatic Gneiss": 3400,
"Brilliant Gneiss": 3500,
"Compressed Gneiss": 3200,
"Compressed Iridescent Gneiss": 3300,
"Compressed Prismatic Gneiss": 3400,
"Compressed Brilliant Gneiss": 3500,
"Griemeer": 110,
"Clear Griemeer": 115,
"Inky Griemeer": 120,
"Opaque Griemeer": 125,
"Compressed Griemeer": 110,
"Compressed Clear Griemeer": 115,
"Compressed Inky Griemeer": 120,
"Compressed Opaque Griemeer": 125,
"Hedbergite": 850,
"Vitric Hedbergite": 860,
"Glazed Hedbergite": 870,
"Lustrous Hedbergite": 890,
"Compressed Hedbergite": 850,
"Compressed Vitric Hedbergite": 860,
"Compressed Glazed Hedbergite": 870,
"Compressed Lustrous Hedbergite": 890,
"Hemorphite": 1100,
"Vivid Hemorphite": 1150,
"Radiant Hemorphite": 1200,
"Scintillating Hemorphite": 1300,
"Compressed Hemorphite": 1100,
"Compressed Vivid Hemorphite": 1150,
"Compressed Radiant Hemorphite": 1200,
"Compressed Scintillating Hemorphite": 1300,
"Hezorime": 900,
"Dull Hezorime": 1000,
"Serrated Hezorime": 1100,
"Sharp Hezorime": 1200,
"Compressed Hezorime": 900,
"Compressed Dull Hezorime": 1000,
"Compressed Serrated Hezorime": 1100,
"Compressed Sharp Hezorime": 1200,
"Jaspet": 300,
"Pure Jaspet": 310,
"Pristine Jaspet": 320,
"Immaculate Jaspet": 330,
"Compressed Jaspet": 300,
"Compressed Pure Jaspet": 310,
"Compressed Pristine Jaspet": 320,
"Compressed Immaculate Jaspet": 330,
"Kernite": 275,
"Luminous Kernite": 280,
"Fiery Kernite": 285,
"Resplendent Kernite": 290,
"Compressed Kernite": 275,
"Compressed Luminous Kernite": 280,
"Compressed Fiery Kernite": 285,
"Compressed Resplendent Kernite": 290,
"Kylixium": 270,
"Kaolin Kylixium": 280,
"Argil Kylixium": 290,
"Adobe Kylixium": 300,
"Compressed Kylixium": 270,
"Compressed Kaolin Kylixium": 280,
"Compressed Argil Kylixium": 290,
"Compressed Adobe Kylixium": 300,
"Mercoxit": 24000,
"Magma Mercoxit": 24500,
"Vitreous Mercoxit": 25000,
"Compressed Mercoxit": 24000,
"Compressed Magma Mercoxit": 24500,
"Compressed Vitreous Mercoxit": 25000,
"Mordunium": 5,
"Plum Mordunium": 5.5,
"Prize Mordunium": 6,
"Plunder Mordunium": 7,
"Compressed Mordunium": 5,
"Compressed Plum Mordunium": 5.5,
"Compressed Prize Mordunium": 6,
"Compressed Plunder Mordunium": 7,
"Nocxite": 700,
"Fragrant Nocxite": 710,
"Intoxicating Nocxite": 720,
"Ambrosial Nocxite": 730,
"Compressed Nocxite": 700,
"Compressed Fragrant Nocxite": 710,
"Compressed Intoxicating Nocxite": 720,
"Compressed Ambrosial Nocxite": 730,
"Omber": 100,
"Silvery Omber": 105,
"Golden Omber": 120,
"Platinoid Omber": 150,
"Compressed Omber": 100,
"Compressed Silvery Omber": 105,
"Compressed Golden Omber": 120,
"Compressed Platinoid Omber": 150,
"Plagioclase": 30,
"Azure Plagioclase": 32,
"Rich Plagioclase": 34,
"Sparkling Plagioclase": 35,
"Compressed Plagioclase": 30,
"Compressed Azure Plagioclase": 32,
"Compressed Rich Plagioclase": 34,
"Compressed Sparkling Plagioclase": 35,
"Pyroxeres": 16,
"Solid Pyroxeres": 17,
"Viscous Pyroxeres": 18,
"Opulent Pyroxeres": 19,
"Compressed Pyroxeres": 16,
"Compressed Solid Pyroxeres": 17,
"Compressed Viscous Pyroxeres": 18,
"Compressed Opulent Pyroxeres": 19,
"Rakovene": 9100,
"Abyssal Rakovene": 9300,
"Hadal Rakovene": 9500,
"Compressed Rakovene": 9100,
"Compressed Abyssal Rakovene": 9300,
"Compressed Hadal Rakovene": 9500,
"Scordite": 7.5,
"Condensed Scordite": 7.9,
"Massive Scordite": 8.1,
"Glossy Scordite": 8.2,
"Compressed Scordite": 7.5,
"Compressed Condensed Scordite": 7.9,
"Compressed Massive Scordite": 8.1,
"Compressed Glossy Scordite": 8.2,
"Spodumain": 6500,
"Bright Spodumain": 6600,
"Gleaming Spodumain": 6700,
"Dazzling Spodumain": 6800,
"Compressed Spodumain": 6500,
"Compressed Bright Spodumain": 6600,
"Compressed Gleaming Spodumain": 6700,
"Compressed Dazzling Spodumain": 6800,
"Talassonite": 8000,
"Abyssal Talassonite": 8500,
"Hadal Talassonite": 8700,
"Compressed Talassonite": 8000,
"Compressed Abyssal Talassonite": 8500,
"Compressed Hadal Talassonite": 8700,
"Ueganite": 700,
"Foggy Ueganite": 720,
"Overcast Ueganite": 740,
"Stormy Ueganite": 750,
"Compressed Ueganite": 700,
"Compressed Foggy Ueganite": 720,
"Compressed Overcast Ueganite": 740,
"Compressed Stormy Ueganite": 750,
"Veldspar": 6,
"Concentrated Veldspar": 6.2,
"Dense Veldspar": 6.4,
"Stable Veldspar": 6.5,
"Compressed Veldspar": 6,
"Compressed Concentrated Veldspar": 6.2,
"Compressed Dense Veldspar": 6.4,
"Compressed Stable Veldspar": 6.5,
"Ytirium": 450,
"Bootleg Ytirium": 460,
"Firewater Ytirium": 470,
"Moonshine Ytirium": 480,
"Compressed Ytirium": 450,
"Compressed Bootleg Ytirium": 460,
"Compressed Firewater Ytirium": 470,
"Compressed Moonshine Ytirium": 480,
};

// Function to add commas to a number
function formatNumberWithCommas(number) {
    return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function showContent() {
  var totalCostContainer = document.getElementById('totalCostContainer');
    var leftContainer = document.getElementById('leftContainer');
    var textarea = document.getElementById('message').value;

    // Reset content before updating
    document.getElementById('totalCostText').innerHTML = '';  

    // Define regex pattern
    var regex = /([\w\s]+?)\s+(\d+)/g;
    var matches;
    var totalCost = 0;
    var invalidItems = [];

    // Iterate through all matches
    while ((matches = regex.exec(textarea)) !== null) {
        var item = matches[1].trim();
        var quantity = parseInt(matches[2]);

        if (priceList[item] !== undefined) {
            var price = priceList[item];
            var cost = quantity * price;
            totalCost += cost;
        } else {
            invalidItems.push(item); // Collect invalid items
        }
    }

    var resultText = formatNumberWithCommas(totalCost.toFixed(2));
    
    // Show invalid items, if any

    if (invalidItems.length > 0) {
        var unrecognizedItems = 'Unrecognized items: ' + invalidItems.join(', ');
        document.getElementById('unrecognizedItemsText').innerHTML = unrecognizedItems;
        unrecognizedItemsContainer.classList.remove('hidden'); // Show unrecognized items container
    }

    // Display total cost and invalid items
    document.getElementById('totalCostText').innerHTML = resultText;
    // Show both containers
    totalCostContainer.classList.remove('hidden');
    leftContainer.classList.remove('hidden');
}

// Function to open the modal
function openModal() {
    document.getElementById('infoModal').style.display = 'block';
}

// Function to close the modal
function closeModal() {
    document.getElementById('infoModal').style.display = 'none';
}

// Close the modal when clicking outside the modal content
window.onclick = function(event) {
    var modal = document.getElementById('infoModal');
    if (event.target == modal) {
        closeModal();
    }
}

// Add event listener to the info button
document.querySelector('.info-button button').addEventListener('click', openModal);

// Close the modal when clicking on the close button (X)
document.querySelector('.w3-display-topright').addEventListener('click', closeModal);

</script>
<script src="https://www.w3schools.com/lib/w3.js"></script>
</body>
</html>
