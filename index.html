<!DOCTYPE html>
<html>
<head>
<title>OreStellar</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">

<style>
html, body {
    background-color: black;
    color: white;
}
.full-width-textarea {
    width: 100%;
    box-sizing: border-box; /* Ensures padding is included in the width */
    margin-bottom: 20px; /* Add margin below textarea */
    resize: none; /* Prevent resizing */
    height: 100%; /* Fill the height of the container */
}
.full-height {
    height: 100%;
}
.form-container {
    height: 100%;
    display: flex;
    flex-direction: column;
}
.iframe-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
.iframe-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%; /* Aspect ratio (16:9) */
    height: 0;
}
.hidden {
    display: none;
}
.center-wrapper {
    display: flex;
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    height: 45vh; /* Full height of the viewport */
}
.w3-card, .w3-container {
    background-color: #333;
    color: white; /* Solid dark grey background */
    opacity: 1; /* Ensure full opacity */
    border-radius: 15px; /* Add rounded corners */
}
</style>
</head>
<body>

<header class="w3-container w3-theme w3-padding" id="myHeader">
  <div class="w3-center">
    <img src="images/OreStellar Header.png" alt="Header Image" style="width: 300px; height: auto;">
  </div>
  <hr>
</header>

<div class="center-wrapper">
  <div class="w3-card w3-container w3-center">
    <h3>Quote</h3><br>
    <div class="form-container">
      <form action="/submit" method="post" class="full-height">
        <textarea id="message" name="message" class="w3-input w3-border w3-round full-width-textarea full-height" rows="8" cols="50" placeholder="Copy and paste your inventory here..&#10;&#10;Ytirium  82460&#10;Jet Ochre 1045&#10;Compressed Ytirium 60253&#10;Compressed Ducinium 2402"></textarea>
      </form>
      <button onclick="showContent()">Submit</button>
      <br>
      <div id="content" class="hidden">
        <p class="w3-center"><em id="extractedData">Extracted data will appear here</em></p>
      </div>
    </div>
  </div>
</div>

<script>
const priceList = {
    "Ytirium": 5.00,          // Price per unit
    "Jet Ochre": 10.00,       // Price per unit
    "Compressed Ytirium": 7.50, // Price per unit
    "Compressed Ducinium": 12.00 // Price per unit
};

function showContent() {
    var content = document.getElementById('content');
    var textarea = document.getElementById('message').value;
    
    // Define regex pattern
    var regex = /([\w\s]+?)\s+(\d+)/g;
    var matches;
    var result = '';
    var totalCost = 0;

    // Iterate through all matches
    while ((matches = regex.exec(textarea)) !== null) {
        var item = matches[1].trim();
        var quantity = parseInt(matches[2]);

        if (priceList[item] !== undefined) {
            var price = priceList[item];
            var cost = quantity * price;
            totalCost += cost;
            result += item + ': ' + quantity + ' units x ' + price.toFixed(2) + ' isk = ' + cost.toFixed(2) + ' isk<br>';
        } else {
            result += item + ': ' + quantity + ' units (price not found)<br>';
        }
    }

    result += '<br><strong>Total Cost: ' + totalCost.toFixed(2) + ' isk</strong>';

    // Display extracted data and total cost
    document.getElementById('extractedData').innerHTML = result;
    content.classList.toggle('hidden');
}
</script>

</body>
</html>
